<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<!-- Vista de Busqueda -->
	
	<record id="ct_nodo_activo_search_view" model="ir.ui.view">
		<field name="name">ct.nodo_activo.search</field>
		<field name="model">ct.nodo_activo</field>
		<field name="arch" type="xml">
			<search>
					<field name="a_poste_id" />
					<field name="state1"/>
					<field name= "tarea" />
			</search>			
		</field>
	</record>

	<!-- Vista Lista -->
	<record id="ct_nodo_activo_tree_view" model="ir.ui.view">
		<field name="name">ct.nodo_activo.tree</field>
		<field name="model">ct.nodo_activo</field>
		<field name="arch" type="xml">
			<tree>
				<field name="a_poste_id" />
				<field name="tipo_activo_id"/>
				<field name="state1"/>
				<field name= "tarea" />
				<field name="notes"/>
				<field name= "state" />
			</tree>
		</field>
	</record>	


	<!-- Vista Formulario -->
	<record id="ct_nodo_activo_form_view" model="ir.ui.view">
		<field name="name">ct.nodo_activo.form</field>
		<field name="model">ct.nodo_activo</field>
		<field name="arch" type="xml">
			<form>
				<header>
					<field name="state" widget="statusbar"/>
				</header>
				<sheet>
					<group string ="Activos" col="4">
						<field name="a_poste_id" attrs="{'readonly': [('bloq_encabe', '=', True)]}" />
						<field name="tipo_activo_id"/>
						<field name="state1" attrs="{'readonly': [('bloq_encabe', '=', True)]}"/>
						<field name= "tarea" attrs="{'readonly': [('bloq_encabe', '=', True)]}"/>
						<field name="notes" />
						<field name="secu_fase" widget="many2many_tags" attrs="{'invisible': [('tipo_activo_code', '!=', 'red')], 'required': [('tipo_activo_code', '=', 'red')]}" options="{'no_create_edit': True, 'no_create': True}"/>
						<field name="tipo_activo_code" invisible="1" />
						<field name="bloq_encabe" invisible="1" />
					</group>

					<group string="Mano de Obra" attrs="{'invisible': [('tipo_activo_code', '=', False)]}">
						<field name="product_ids" nolabel="1" context="{'tipo_product' : 'mo'}">
							<tree editable="buttom">							
								<field name="product_id" domain="[('tipo_activo_ids', '=', parent.tipo_activo_id)]" required="1" options="{'no_create_edit': True, 'no_create': True}"/>
								<field name="estructura_ids" attrs="{'required': [('vali_len_estruc', '=', True)] }" domain="[('id', 'in', estructura_product_ids)]" options="{'no_create_edit': True, 'no_create': True}"/>	
								<field name="valor_uni" optional="hide" readonly="1"/>
								<field name="distancia" attrs="{'readonly': [('tipo_activo_code', '!=', 'red')]}"/>
								<field name="can_lineas" attrs="{'readonly': [('tipo_activo_code', '!=', 'red')]}"/>
								<field name="cantidad" attrs="{'readonly': [('tipo_activo_code', '=', 'red')]}"/>						
								<field name="vali_len_estruc" invisible = "1"/>
								<field name="tipo_activo_code" invisible = "1"/>
								<field name="tipo_product" invisible="1"/>
								<field name="estructura_product_ids" invisible="1" />
								<field name="state" invisible="1"/>
							</tree>
						</field>
						<newline />
						<button name="bt_calcular_material_nuevo" class="oe_highlight" string=" Calcular Material Nuevo" type="object"/>
                       
					</group>

				<group string="Material Nuevo" attrs="{'invisible': [('tipo_activo_code', '=', False)]}">
						<field name="product_mn_ids" nolabel="1" context="{'tipo_product' : 'nuevo',  'default_state': state}">
							<tree editable="buttom">
								<field name="product_id" domain="[('detailed_type', '=', 'product')]" options="{'no_create_edit': True, 'no_create': True}" required="1"/>
								<field name="valor_uni" optional="hide"/>
								<field name="cantidad" />	
								<field name="bodega" attrs="{'invisible': [('state','!=', 'ejecucion')]}"/>	
								<field name="tipo_product" invisible="1"/>
								<field name="state" />							
							</tree>
						</field>
				</group>

				<group string="Material Retirado" attrs="{'invisible': [('tipo_activo_code', '=', False)], 'invisible': [('state','=', 'diseÃ±o')]}">
						<field name="product_mr_ids" nolabel="1" context="{'tipo_product' : 'retirado'}">
							<tree editable="buttom">
								<field name="product_id" domain="[('detailed_type', '=', 'consu')]" options="{'no_create_edit': True, 'no_create': True}" required="1"/>
								<field name="cantidad" />
								<field name="tipo_product" invisible="1"/>
								<field name="state" invisible="1"/>												
							</tree>
						</field>
				</group>
					
				</sheet>
			</form>
		</field>
	</record>



	<!-- Accion del formulario -->
	<record id="ct_nodo_activo_action" model="ir.actions.act_window">
		<field name="name">ACTIVOS NODO</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">ct.nodo_activo</field>
		<field name="view_mode">tree,form</field>
	</record>

	<!-- menu de acceso -->
	 <!--<menuitem id="ct_nodo_activo_menu" name="Activos x nodo" parent="merp_config_menu" action="ct_nodo_activo_action" />-->

</odoo>